{"title":"$:/plugins/wikilabs/bundler","description":"Bundler - Simple UI to create tiddler bundles","author":"pmario","core-version":">=5.1.14","version":"0.1.2","list":"readme license history","plugin-type":"plugin","dependents":"","type":"application/json","text":"{\n    \"tiddlers\": {\n        \"$:/plugins/wikilabs/bundler/doc/table-all-filters\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/doc/table-all-filters\",\n            \"created\": \"20170602150722531\",\n            \"modified\": \"20170609084521849\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"!! Default Filters\\n\\n<table>\\n<tbody>\\n<th>Description</th><th>Filter</th><th>Test</th>\\n<$list filter=\\\"[all[shadows]tag[$:/tags/Filter]]\\\">\\n  <tr>\\n    <td>{{!!description}}</td>\\n    <td><$view field=filter/></td>\\n    <td>{{||$:/plugins/wikilabs/bundler/ui/Buttons/test-filter}}</td>\\n  </tr>\\n</$list>\\n</tbody>\\n</table>\\n\\n!! This Wiki\\n\\n<table>\\n<tbody>\\n<th>Description</th><th>Filter</th><th>Test</th>\\n<$list filter=\\\"[all[tiddlers]tag[$:/tags/Filter]]\\\">\\n  <tr>\\n    <td>{{!!description}}</td>\\n    <td><$view field=filter/></td>\\n    <td>{{||$:/plugins/wikilabs/bundler/ui/Buttons/test-filter}}</td>\\n  </tr>\\n</$list>\\n</tbody>\\n</table>\\n\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/Bundles\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/Bundles\",\n            \"caption\": \"Bundles\",\n            \"created\": \"20170601134806876\",\n            \"modified\": \"20170609084521847\",\n            \"tags\": \"$:/tags/SideBar\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"{{$:/plugins/wikilabs/bundler/ui/BundlesList}}\\n\\n---\\n\\n<$reveal type=\\\"match\\\" state=\\\"$:/config/wikilabs/enableBundles\\\" text=\\\"enabled\\\">\\n\\n{{$:/plugins/wikilabs/bundler/ui/BundlesFiltered}}\\n\\n</$reveal>\\n\\n<$reveal type=\\\"nomatch\\\" state=\\\"$:/config/wikilabs/enableBundles\\\" text=\\\"enabled\\\">\\n\\n[[Enable Filtered Bundles|$:/plugins/wikilabs/bundler/ui/ControlPanel/bundler-config]]\\n\\n</$reveal>\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/BundlesFiltered\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/BundlesFiltered\",\n            \"created\": \"20170604154246985\",\n            \"modified\": \"20170609084521844\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define filter-exist() [enlist{$(currentTiddler)$}] +[has[title]]\\n\\\\define filter-list() [enlist{$(currentTiddler)$}]\\n\\\\define get-info() <$count filter=<<filter-exist>> />/<$count filter=<<filter-list>> />\\n\\\\define get-tooltip() <$count filter=<<filter-exist>> />, out of <$count filter=<<filter-list>> /> tiddlers will be exported. Check for typos!\\n\\\\define count-filter() <$count filter={{$(currentTiddler)$!!filter}} /> \\n\\\\define get-filter-tooltip() <<count-filter>> tiddlers will be exported\\n\\n\\\\define go-advanced-search-filter()\\n<$action-setfield $tiddler=\\\"$:/state/tab--1498284803\\\" $value=\\\"$:/core/ui/AdvancedSearch/Filter\\\"/>\\n<$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" $value={{$(currentTiddler)$!!filter}}/>\\n\\\\end\\n\\\\define test-filter()\\n<$button to=\\\"$:/AdvancedSearch\\\" actions=<<go-advanced-search-filter>> class=\\\"tc-btn-invisible\\\" tooltip=\\\"Test the filter\\\" style=\\\"cursor:help\\\">\\n <<count-filter>> \\n</$button>\\n\\\\end\\n\\n<$button>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\" \\ntitle=\\\"new-filtered.bundle\\\" \\ntags=\\\"$:/tags/Filter\\\" \\ndescription=\\\"provide a meaningful description to display in AdvancedSearch: Filter!\\\"\\nfilter=\\\"adjust this filter: [list[$:/StoryList]]\\\" \\ntext=\\\"<pre>{{!!filter}}</pre>\\\"/>\\nFilter Bundle\\n</$button><$list\\nfilter=\\\"[tag[$:/tags/Filter]]\\\">\\n<$link to=<<currentTiddler>> tooltip=<<get-filter-tooltip>> >\\n\\n{{||$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle-filter}} <<test-filter>> <<currentTiddler>>\\n</$link> </$list>\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/BundlesList\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/BundlesList\",\n            \"created\": \"20170604154146106\",\n            \"modified\": \"20170609084521841\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define filter-exist() [enlist{$(currentTiddler)$}] +[has[title]]\\n\\\\define filter-list() [enlist{$(currentTiddler)$}]\\n\\\\define get-info() <$count filter=<<filter-exist>> />/<$count filter=<<filter-list>> />\\n\\\\define get-tooltip() <$count filter=<<filter-exist>> />, out of <$count filter=<<filter-list>> /> tiddlers will be exported. Check for typos!\\n\\\\define count-filter() <$count filter={{$(currentTiddler)$!!filter}} /> \\n\\\\define get-filter-tooltip() <<count-filter>> tiddlers will be exported\\n\\n\\\\define go-advanced-search-filter()\\n<$action-setfield $tiddler=\\\"$:/state/tab--1498284803\\\" $value=\\\"$:/core/ui/AdvancedSearch/Filter\\\"/>\\n<$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" $value={{$(currentTiddler)$!!filter}}/>\\n\\\\end\\n\\\\define test-filter()\\n<$button to=\\\"$:/AdvancedSearch\\\" actions=<<go-advanced-search-filter>> class=\\\"tc-btn-invisible\\\" tooltip=\\\"Test the filter\\\" style=\\\"cursor:help\\\">\\n <<count-filter>> \\n</$button>\\n\\\\end\\n\\n<$button>\\n<$action-sendmessage $message=\\\"tm-new-tiddler\\\" \\ntitle=\\\"new.bundle\\\" \\ntags=\\\"$:/tags/Bundle\\\" \\ntype=\\\"text/plain\\\" \\ntext=\\\"tiddlerName\\n[[tiddler with spaces]]\\\"/>\\nNew Bundle List\\n</$button>\\n<$list filter=\\\"[tag[$:/tags/Bundle]]\\\">\\n\\n<$link to=<<currentTiddler>> tooltip=<<get-tooltip>> >\\n{{||$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle}} <<get-info>> <<currentTiddler>>\\n</$link>\\n</$list>\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle-filter\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle-filter\",\n            \"caption\": \"{{$:/core/images/export-button}} {{$:/language/Buttons/ExportTiddler/Caption}}\",\n            \"created\": \"20170602112538007\",\n            \"description\": \"export bundle\",\n            \"modified\": \"20170609084521879\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"<$macrocall $name=\\\"exportButton\\\" exportFilter={{!!filter}} lingoBase=\\\"$:/language/Buttons/ExportTiddlers/\\\" baseFilename=<<currentTiddler>>/>\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/Buttons/export-bundle\",\n            \"caption\": \"{{$:/core/images/export-button}} {{$:/language/Buttons/ExportTiddler/Caption}}\",\n            \"created\": \"20170601135455476\",\n            \"description\": \"export bundle\",\n            \"modified\": \"20170609084521882\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define makeExportFilter()\\n[enlist{$(currentTiddler)$}]\\n\\\\end\\n<$macrocall $name=\\\"exportButton\\\" exportFilter=<<makeExportFilter>> lingoBase=\\\"$:/language/Buttons/ExportTiddler/\\\" baseFilename=<<currentTiddler>>/>\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/Buttons/test-filter\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/Buttons/test-filter\",\n            \"created\": \"20170602135926983\",\n            \"modified\": \"20170609084521834\",\n            \"tags\": \"\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"\\\\define go-advanced-search-filter()\\n<$action-setfield $tiddler=\\\"$:/state/tab--1498284803\\\" $value=\\\"$:/core/ui/AdvancedSearch/Filter\\\"/>\\n<$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" $value={{$(currentTiddler)$!!filter}}/>\\n\\\\end\\n\\\\define test-filter()\\n<$button to=\\\"$:/AdvancedSearch\\\" actions=<<go-advanced-search-filter>> class=\\\"tc-btn-invisible\\\" tooltip=\\\"Test the filter\\\">\\n{{$:/core/images/info-button}}\\n</$button>\\n\\\\end\\n\\n<<test-filter>>\"\n        },\n        \"$:/plugins/wikilabs/bundler/ui/ControlPanel/bundler-config\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/ui/ControlPanel/bundler-config\",\n            \"caption\": \"Bundles\",\n            \"created\": \"20170602132707785\",\n            \"modified\": \"20170612095528115\",\n            \"tags\": \"$:/tags/ControlPanel\",\n            \"type\": \"text/vnd.tiddlywiki\",\n            \"text\": \"!! Wikilabs [[Bundle Settings|$:/plugins/wikilabs/bundler/ui/ControlPanel/bundler-config]]\\n\\n<<<\\n\\nSelect the position of the bundle tab:\\n\\n<$tiddler tiddler=\\\"$:/plugins/wikilabs/bundler/ui/Bundles\\\">\\n<$radio field=tags value=\\\"$:/tags/MoreSideBar\\\"> \\\"$:/tags/MoreSideBar\\\"</$radio><br>\\n<$radio field=tags value=\\\"$:/tags/SideBar\\\"> \\\"$:/tags/SideBar\\\"</$radio>\\n</$tiddler>\\n\\n<<<\\n\\n!! Enable Overwrite Check\\n\\n<<<\\n<$checkbox tiddler=\\\"$:/config/wikilabs/enableOverwriteCheck\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> Enable Overwrite Check</$checkbox>\\n\\nBy default, the import mechanism overwrites existing tiddlers. By enabling this option, you can activate a mechanism, that creates a new tiddler name. By default this option is off.\\n<<<\\n\\n!! Enable Import Bundle\\n\\n<<<\\n\\n<$checkbox tiddler=\\\"$:/config/wikilabs/enableImportBundle\\\" field=\\\"text\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"no\\\"> Enable Import Bundle</$checkbox>\\n\\nEverytime you import content, an [[import.bundle]] tiddler will be created. If the tiddler already exists, the new imported titles will be appended. \\n\\nYou can rename or delete the tiddler, to store the setting or get rid of it. \\n\\n<<<\\n\\n!! Enable Filtered Bundles\\n\\n<<<\\n\\n<$checkbox tiddler=\\\"$:/config/wikilabs/enableBundles\\\" field=\\\"text\\\" checked=\\\"enabled\\\" unchecked=\\\"disabled\\\" default=\\\"disabled\\\"> Enable Filtered Bundles</$checkbox>\\n\\nBundle filters are already used by the \\\"More\\\" dropdown in the $:/AdvancedSearch - Filter tab. The filtered bundle settings provide a slightly different UI to export sets of tiddlers, configured by the user. \\n\\nThe \\\"Filter Bundle\\\" button creates compatible configurations. So user created filtered bundles show up in the advanced search panel too! Existing filters can be seen here: $:/plugins/wikilabs/bundler/doc/table-all-filters\\n\\n<<<\\n\\n!! Filter Format\\n\\n<<<\\n\\n;text\\n:contains the documentation text if needed\\n\\n;filter\\n:filter to use eg: `[tag[test]]`\\n\\n;description\\n:descriptive text, that shows up in the AdvancedSearch: Filter: More dropdown\\n\\n<<<\"\n        },\n        \"$:/plugins/wikilabs/bundler/importhook.js\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/importhook.js\",\n            \"text\": \"/*\\\\\\ntitle: $:/plugins/wikilabs/bundler/importhook.js\\ntype: application/javascript\\nmodule-type: startup\\n\\nA startup module to log imported tiddlers to the import.bundle tiddler.\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\n// Export name and synchronous status\\nexports.name = \\\"bundlerimporthook\\\";\\nexports.platforms = [\\\"browser\\\"];\\nexports.after = [\\\"startup\\\"];\\nexports.synchronous = true;\\n\\n// Favicon tiddler\\nvar ENABLE_LOG_TITLE = \\\"$:/config/wikilabs/enableImportBundle\\\",\\n\\tIMPORT_LOG_TITLE = \\\"import.bundle\\\";\\n\\nexports.startup = function() {\\n\\t$tw.hooks.addHook(\\\"th-importing-tiddler\\\",function(tiddler) {\\n\\t\\tvar logTiddler,\\n\\t\\t\\ttidTitle = tiddler.fields.title;\\n\\n\\t\\tif($tw.wiki.checkTiddlerText(ENABLE_LOG_TITLE,\\\"yes\\\")) {\\n\\t\\t\\tlogTiddler = $tw.wiki.getTiddler(IMPORT_LOG_TITLE) || new $tw.Tiddler($tw.wiki.getCreationFields(), $tw.wiki.getModificationFields(), {title: IMPORT_LOG_TITLE, text: \\\"\\\", type: \\\"text/plain\\\", tags: [\\\"$:/tags/Bundle\\\"]});\\n\\n\\t\\t\\tif (tidTitle.indexOf(\\\" \\\") !== -1) {\\n\\t\\t\\t\\t$tw.wiki.addTiddler( new $tw.Tiddler( logTiddler, {text: logTiddler.fields.text + \\\"[[\\\" + tidTitle + \\\"]]\\\\n\\\"}));\\n\\t\\t\\t} else {\\n\\t\\t\\t\\t$tw.wiki.addTiddler( new $tw.Tiddler( logTiddler, {text: logTiddler.fields.text + tidTitle + \\\"\\\\n\\\"}));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\treturn tiddler;\\n\\t});\\n};\\n\\n})();\\n\",\n            \"type\": \"application/javascript\",\n            \"module-type\": \"startup\"\n        },\n        \"$:/plugins/wikilabs/bundler/upgrade.js\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/upgrade.js\",\n            \"text\": \"/*\\\\\\ntitle: $:/plugins/wikilabs/bundler/upgrade.js\\ntype: application/javascript\\nmodule-type: upgrader\\n\\nThis module checks, if tiddlers, that are imported already exist. If they do, they are disabled and a tiddler with a new name will be created. ge: \\\"New Tiddler (1)\\\". This option is configurable.\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n\\\"use strict\\\";\\n\\nvar ENABLE_OVERWRITE_CHECK = \\\"$:/config/wikilabs/enableOverwriteCheck\\\";\\n\\nexports.upgrade = function(wiki,titles,tiddlers) {\\n\\tvar self = this,\\n\\t\\tmessages = {},\\n\\t\\toverwriteCheck = $tw.wiki.checkTiddlerText(ENABLE_OVERWRITE_CHECK,\\\"yes\\\");\\n\\n\\t$tw.utils.each(titles,function(title) {\\n\\t\\tvar tiddler = {},\\n\\t\\t\\ttiddlerData = wiki.getTiddler(title);\\n\\t\\t// Check for tiddlers on our list. Atm, we check for names only, since 5.1.14 allows modification date to be supressed.\\n\\t\\t// Creating a hash, would be a better option. ToDo\\n\\t\\tif (wiki.tiddlerExists(title)) {\\n\\t\\t\\tmessages[title] = \\\"Existing tiddler will be overwritten!\\\";\\n\\t\\t\\t// create new tiddler with a new name\\n\\t\\t\\tif (overwriteCheck) {\\n\\t\\t\\t\\tmessages[title] = \\\"A tiddler with that name exists. A new name will be used!\\\";\\n\\t\\t\\t\\ttiddler = new $tw.Tiddler(tiddlers[title], {\\\"title\\\": wiki.generateNewTitle(title) });\\n\\t\\t\\t\\ttiddlers[tiddler.fields.title] = tiddler.fields;\\n\\t\\t\\t\\t// remove the original tiddler\\n\\t\\t\\t\\ttiddlers[title] = Object.create(null);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t});\\n\\treturn messages;\\n\\t}\\n\\n})();\\n\",\n            \"type\": \"application/javascript\",\n            \"module-type\": \"upgrader\"\n        },\n        \"$:/plugins/wikilabs/bundler/history\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/history\",\n            \"text\": \"V 0.1.2 - 2020.01.19\\n\\n* Update license link/text\\n\\nV 0.1.1 - beta 2017.06.18\\n\\n* improve license links and readme\\n* fix upgrade.js title\\n\\nV 0.1.0 - beta\\n\\n* new name: bundler\\n* this name change makes it incompatible to older settings!\\n\\n** new \\\"Enable Overwrite Check\\\" option. default = no\\n\\nV 0.0.1 - beta\\n\\n* initial release\\n* name: bundles\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/license\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/license\",\n            \"text\": \"[[Bundler-Plugin|https://wikilabs.github.io/#bundler]] (C) Mario Pietsch - 2017-2020\\n\\nhttps://opensource.org/licenses/BSD-3-Clause\\n\"\n        },\n        \"$:/plugins/wikilabs/bundler/readme\": {\n            \"title\": \"$:/plugins/wikilabs/bundler/readme\",\n            \"text\": \"\\n* Documentation and more can be found at: https://wikilabs.github.io/#bundler\\n* The position of the \\\"Bundles\\\" tab can be selected in the $:/ControlPanel\\n* There are 2 version of bundles\\n** Bundle lists\\n** Filtered Bundles ... which have to be activated by the user\\n* The filter examples can be live tested, clicking on the number besides the \\\"export button\\\"\\n* The Bundler can bundle itself into a bundle :-).\\n* You can create several \\\"selections\\\". Those combinations are persistently stored for reuse. \\n* Bundle lists can be built up, over time. Just as the TW evolves. \\n* The \\\"Enable Import Bundle\\\" option lets you collect / log imported tiddlers and create a new bundle, for future use.\\n* This plugin only works with TW >= 5.1.14 since we use the \\\"enlist\\\" operator which has been added in 5.1.14\\n* It's easy to add the bundle configuration to the bundle itself eg: \\n** If the bundle is named: `tagged-test.bundle`, the filter can look like this: `[tag[test]] tagged-test.bundle`\\n* Have a closer look at the ~$:/ControlPanel: Bundles tab for more [[settings|$:/plugins/wikilabs/bundler/ui/ControlPanel/bundler-config]]. \\n\"\n        }\n    }\n}"}